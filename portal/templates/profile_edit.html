{% extends "base.html" %}
{% from "_macros.html" import render_field %}
{% block title %}Enterra ‚Äî –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è{% endblock %}

{% block content %}
  <div class="row justify-content-center mt-4">
    <div class="col-lg-8">
      <div class="portal-panel p-3 p-lg-4">
        <div class="d-flex justify-content-between align-items-center">
          <div class="h4 mb-0">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è</div>
          <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('main.profile', username=current_user.username) }}">–ù–∞–∑–∞–¥</a>
        </div>

        <form method="post" class="mt-3" enctype="multipart/form-data">
          {{ form.hidden_tag() }}
          
          <div class="mb-3">
            <label class="form-label" for="{{ form.avatar.id }}">{{ form.avatar.label.text }}</label>
            {% if current_user.avatar_path %}
              <div class="mb-2">
                <img src="{{ url_for('static', filename=current_user.avatar_path) }}" alt="–¢–µ–∫—É—â–∏–π –∞–≤–∞—Ç–∞—Ä" style="width: 100px; height: 100px; object-fit: cover; border-radius: 22px; border: 1px solid rgba(255,255,255,.2);">
              </div>
            {% endif %}
            {{ form.avatar(class_="form-control") }}
            <div class="form-text">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∞ (jpg, png, webp, gif).</div>
          </div>

          <div class="mb-3">
            <label class="form-label" for="{{ form.bio.id }}">{{ form.bio.label.text }}</label>
            {{ form.bio(class_="form-control", rows="4", placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ...") }}
            {% if form.bio.errors %}
              <div class="form-text text-danger">{{ form.bio.errors[0] }}</div>
            {% endif %}
          </div>

          <div class="mb-3">
            <label class="form-label" for="{{ form.theme_preference.id }}">{{ form.theme_preference.label.text }}</label>
            <select class="form-select" id="{{ form.theme_preference.id }}" name="{{ form.theme_preference.name }}">
              <option value="dark" {% if current_user.theme_preference == 'dark' %}selected{% endif %}>üåô –¢–µ–º–Ω–∞—è</option>
              <option value="light" {% if current_user.theme_preference == 'light' %}selected{% endif %}>‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è</option>
              <option value="auto" {% if current_user.theme_preference == 'auto' %}selected{% endif %}>üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</option>
            </select>
            <div class="form-text">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è.</div>
          </div>

          <div class="form-check mb-3">
            {{ form.is_private(class_="form-check-input") }}
            <label class="form-check-label" for="{{ form.is_private.id }}">{{ form.is_private.label.text }}</label>
            <div class="form-text">–ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ, –≤–∞—à –ø—Ä–æ—Ñ–∏–ª—å –±—É–¥–µ—Ç –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º.</div>
          </div>

          <button class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </form>
      </div>
    </div>
  </div>
{% endblock %}
